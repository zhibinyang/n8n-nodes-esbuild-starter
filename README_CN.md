# n8n-nodes-esbuild-starter

[English](./README.md) | ç®€ä½“ä¸­æ–‡

ä¸€ä¸ªä½¿ç”¨ **esbuild** æ›¿ä»£ TypeScript ç¼–è¯‘å™¨ï¼ˆtscï¼‰æ„å»º [n8n](https://n8n.io) è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç”Ÿäº§ä¼˜åŒ–å¯åŠ¨æ¨¡æ¿ã€‚

> ğŸ’¡ **ä¸ºä»€ä¹ˆä½¿ç”¨ esbuildï¼Ÿ** æ­¤å¯åŠ¨æ¨¡æ¿ä½¿ç”¨ esbuild é€šè¿‡æ™ºèƒ½æ‰“åŒ…å’Œå‹ç¼©æ¥æ˜¾è‘—å‡å°‘åŒ…å¤§å°å¹¶æå‡ Cloud Run + GCS éƒ¨ç½²æ€§èƒ½ã€‚

## âœ¨ ç›¸å¯¹äºå®˜æ–¹ Starter çš„å…³é”®ä¼˜åŠ¿

æ­¤å¯åŠ¨æ¨¡æ¿ä¸ [å®˜æ–¹ n8n-nodes-starter](https://github.com/n8n-io/n8n-nodes-starter) åœ¨å‡ ä¸ªé‡è¦æ–¹é¢æœ‰æ‰€ä¸åŒï¼š

### ğŸš€ **ç”Ÿäº§ä¼˜åŒ–çš„æ„å»º**
- **å¤§å¹…å‡å°‘æ–‡ä»¶æ•°é‡**ï¼šå°†æˆç™¾ä¸Šåƒä¸ªä¾èµ–æ–‡ä»¶æ‰“åŒ…æˆå‡ ä¸ªæ–‡ä»¶ï¼ˆå‡å°‘çº¦99%çš„æ–‡ä»¶æ•°ï¼‰
- **æ›´å°çš„åŒ…ä½“ç§¯**ï¼šä¾èµ–é»˜è®¤è¢«æ‰“åŒ…å’Œå‹ç¼©ï¼ˆå‡å°‘çº¦50-70%çš„å¤§å°ï¼‰
- **å‡å°‘å†…å­˜å ç”¨**ï¼šå•ä¸ªæ‰“åŒ…æ–‡ä»¶æ¯”å¤§é‡å°æ–‡ä»¶å ç”¨æ›´å°‘å†…å­˜
- **æ›´å¿«çš„æ„å»º**ï¼šæ¯” tsc å¿«çº¦100å€ï¼ˆæ¯«ç§’çº§ vs ç§’çº§ï¼‰
- **ç”Ÿäº§ä¼˜å…ˆ**ï¼šé»˜è®¤å‹ç¼©è¾“å‡ºï¼Œå¼€å‘æ¨¡å¼å¯é€‰

> ğŸ’¡ **æ ¸å¿ƒä¼˜åŠ¿**ï¼šå½“æ‚¨å¼•å…¥åƒ `google-ads-api`ã€`axios` ç­‰ npm ä¾èµ–æ—¶ï¼Œä¼ ç»Ÿæ„å»ºä¼šåˆ›å»ºæˆç™¾ä¸Šåƒä¸ªæ–‡ä»¶ã€‚esbuild å°†æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°å•ä¸ªæ–‡ä»¶ä¸­ï¼Œå¤§å¹…å‡å°‘ç£ç›˜ I/O å’Œå†…å­˜ä½¿ç”¨ - è¿™å¯¹ Cloud Run å’Œå®¹å™¨åŒ–éƒ¨ç½²è‡³å…³é‡è¦ã€‚

### ğŸ“¦ **æ›´é€‚åˆéƒ¨ç½²**
- **Cloud Run + GCS ä¼˜åŒ–**ï¼šæœ€å°åŒ–æ–‡ä»¶æ•°é‡ä»¥æå‡ GCS æŒ‚è½½æ€§èƒ½
- **è‡ªåŒ…å«**ï¼šæ‰€æœ‰ä¾èµ–å·²æ‰“åŒ…ï¼Œè¿è¡Œæ—¶æ— éœ€å¤–éƒ¨ node_modules
- **æ›´å°çš„ npm åŒ…**ï¼šç”¨æˆ·ä¸‹è½½å‹ç¼©åçš„åŒ…è€Œéæºä»£ç 

### ğŸ› ï¸ **å¼€å‘ä½“éªŒ**
- **å¿«é€Ÿè¿­ä»£**ï¼šé—ªç”µèˆ¬çš„é‡æ„å»ºé€Ÿåº¦
- **ç›‘å¬æ¨¡å¼**ï¼šæ–‡ä»¶æ”¹åŠ¨å³æ—¶é‡æ„å»º
- **Source maps**ï¼šå¼€å‘æ¨¡å¼ä¸‹å¯ç”¨ï¼Œä¾¿äºè°ƒè¯•

## ğŸ¯ ä½•æ—¶ä½¿ç”¨æ­¤ Starter

**ä½¿ç”¨æ­¤ esbuild starterï¼Œå¦‚æœï¼š**
- âœ… æ‚¨éœ€è¦å¼•å…¥å¤–éƒ¨ npm ä¾èµ–
- âœ… æ‚¨æ­£åœ¨éƒ¨ç½²åˆ° Cloud Runã€GCS æˆ–ç±»ä¼¼å¹³å°
- âœ… åŒ…å¤§å°å’Œéƒ¨ç½²æ€§èƒ½å¾ˆé‡è¦
- âœ… æ‚¨å¸Œæœ›å¼€å‘æ—¶æ„å»ºæ›´å¿«

**ä½¿ç”¨ [å®˜æ–¹ starter](https://github.com/n8n-io/n8n-nodes-starter)ï¼Œå¦‚æœï¼š**
- æ‚¨æ­£åœ¨ä¸º n8n Cloud æ„å»ºèŠ‚ç‚¹ï¼ˆä¸å…è®¸å¤–éƒ¨ä¾èµ–ï¼‰
- æ‚¨æ›´å–œæ¬¢æ ‡å‡†çš„ TypeScript å·¥ä½œæµ
- æ‚¨æƒ³ä½¿ç”¨äº¤äº’å¼çš„ `@n8n/node-cli` è„šæ‰‹æ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä»æ¨¡æ¿åˆ›å»º

1. **[ä»æ­¤æ¨¡æ¿ç”Ÿæˆæ–°ä»“åº“](https://github.com/zhibinyang/n8n-nodes-esbuild-starter/generate)**
2. **å…‹éš†æ‚¨çš„ä»“åº“**ï¼š
   ```bash
   git clone https://github.com/<your-username>/<your-repo>.git
   cd <your-repo>
   ```

3. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   npm install
   ```

4. **å¼€å§‹å¼€å‘**ï¼š
   ```bash
   npm run build:watch
   ```

## ğŸ“‹ åŒ…å«å†…å®¹

æ­¤å¯åŠ¨æ¨¡æ¿åŒ…å«ä¸¤ä¸ªç¤ºä¾‹èŠ‚ç‚¹ï¼š

- **[Example Node](nodes/Example/)** - å±•ç¤ºåŸºæœ¬ç»“æ„çš„ç®€å•å¯åŠ¨èŠ‚ç‚¹
- **[GitHub Issues Node](nodes/GithubIssues/)** - ç”Ÿäº§å°±ç»ªçš„ç¤ºä¾‹ï¼ŒåŒ…å«ï¼š
  - å¤šä¸ªèµ„æºå’Œæ“ä½œ
  - OAuth2 å’Œ API ä»¤ç‰Œè®¤è¯
  - å£°æ˜å¼/ä½ä»£ç é£æ ¼ï¼ˆæ¨èç”¨äº HTTP APIï¼‰

> æŸ¥çœ‹ [å®˜æ–¹ n8n æ–‡æ¡£](https://docs.n8n.io/integrations/creating-nodes/) è·å–å®Œæ•´çš„èŠ‚ç‚¹å¼€å‘æŒ‡å—ã€‚

## ğŸ”¨ å¯ç”¨è„šæœ¬

| è„šæœ¬ | æè¿° |
|-----|------|
| `npm run build` | **ç”Ÿäº§æ„å»º**ï¼ˆé»˜è®¤ï¼‰- å‹ç¼©ï¼Œæ—  sourcemap |
| `npm run build:dev` | å¼€å‘æ„å»ºï¼Œå¸¦ sourcemap |
| `npm run build:watch` | ç›‘å¬æ¨¡å¼ç”¨äºå¼€å‘ |
| `npm run lint` | æ£€æŸ¥ä»£ç é”™è¯¯ |
| `npm run lint:fix` | è‡ªåŠ¨ä¿®å¤ lint é—®é¢˜ |

### æ„å»ºè¾“å‡ºå¯¹æ¯”

```bash
# ç”Ÿäº§æ„å»ºï¼ˆé»˜è®¤ï¼‰
npm run build
# â†’ åŸå§‹å¤§å°çš„çº¦10-30%ï¼Œå¯ç›´æ¥éƒ¨ç½²

# å¼€å‘æ„å»ºï¼ˆå¸¦ sourcemapï¼‰
npm run build:dev  
# â†’ æ–‡ä»¶è¾ƒå¤§ï¼Œä¾¿äºè°ƒè¯•
```

## ğŸ› ï¸ æ„å»ºç³»ç»Ÿè¯¦æƒ…

### å·¥ä½œåŸç†

æ­¤å¯åŠ¨æ¨¡æ¿ä½¿ç”¨ **esbuild** æ¥ï¼š
1. å°†æ¯ä¸ª `*.node.ts` å’Œ `*.credentials.ts` æ–‡ä»¶æ‰“åŒ…ä¸ºç‹¬ç«‹çš„å…¥å£ç‚¹
2. å°†æ‰€æœ‰ npm ä¾èµ–åŒ…å«åœ¨ bundle ä¸­ï¼ˆé™¤äº† `n8n-workflow` å’Œ `n8n-core`ï¼‰
3. é»˜è®¤å‹ç¼©å’Œä¼˜åŒ–ç”¨äºç”Ÿäº§ç¯å¢ƒ
4. å°†é™æ€èµ„æºï¼ˆ`.svg`ã€`.json`ï¼‰å¤åˆ¶åˆ°è¾“å‡ºç›®å½•

### é…ç½®

æ„å»ºåœ¨ [`esbuild.config.mjs`](esbuild.config.mjs) ä¸­é…ç½®ï¼š

- **å¤–éƒ¨ä¾èµ–**ï¼š`n8n-workflow`ã€`n8n-core` å’Œ Node.js å†…ç½®æ¨¡å—
- **æ‰“åŒ…çš„ä¾èµ–**ï¼šå…¶ä»–æ‰€æœ‰å†…å®¹ï¼ˆæ‚¨çš„ npm åŒ…ï¼‰
- **ç”Ÿäº§æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼š`minify: true`ï¼Œ`sourcemap: false`
- **å¼€å‘æ¨¡å¼**ï¼ˆ`--dev` flagï¼‰ï¼š`minify: false`ï¼Œ`sourcemap: true`

### æ·»åŠ ä¾èµ–

```bash
npm install your-package
```

ä¾èµ–ä¼šè‡ªåŠ¨æ‰“åŒ…åˆ°æ‚¨çš„è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼

> âš ï¸ **å…³é”®æé†’**ï¼šå§‹ç»ˆå°†æ‚¨çš„ä¾èµ–æ·»åŠ åˆ° `devDependencies`ï¼Œè€Œä¸æ˜¯ `dependencies`ï¼
> 
> ```json
> {
>   "devDependencies": {
>     "your-package": "^1.0.0"  // âœ… æ­£ç¡® - ä»…åœ¨æ„å»ºæ—¶éœ€è¦
>   },
>   "dependencies": {
>     // âŒ ä¸è¦æŠŠæ‰“åŒ…çš„åŒ…æ”¾åœ¨è¿™é‡Œï¼
>   }
> }
> ```
> 
> **ä¸ºä»€ä¹ˆï¼Ÿ** å½“ç”¨æˆ·é€šè¿‡ n8n å®‰è£…æ‚¨çš„èŠ‚ç‚¹æ—¶ï¼š
> - `dependencies` ä¸­çš„åŒ…ä¼šè¢« npm å®‰è£…ï¼ˆçº¦100MB+çš„æ–‡ä»¶ï¼‰
> - `devDependencies` ä¸­çš„åŒ…ä¸ä¼šè¢«å®‰è£…ï¼ˆå·²ç»åœ¨æ‚¨çš„ .js æ–‡ä»¶ä¸­æ‰“åŒ…äº†ï¼‰
> - å¦‚æœåœ¨è¿è¡Œæ—¶å®‰è£…ä¾èµ–ï¼Œè¿™ä¼šè¿èƒŒæ‰“åŒ…çš„ç›®çš„ï¼

## ğŸ“¤ å‘å¸ƒæ‚¨çš„èŠ‚ç‚¹

æœ‰å…³è¯¦ç»†çš„å‘å¸ƒè¯´æ˜ï¼Œè¯·å‚è€ƒ [å®˜æ–¹ n8n-nodes-starter æ–‡æ¡£](https://github.com/n8n-io/n8n-nodes-starter#readme)ã€‚

**å‘å¸ƒå‰ï¼Œè¯·ç¡®ä¿ï¼š**
1. ä½¿ç”¨ç”Ÿäº§æ¨¡å¼æ„å»ºï¼š`rm -rf dist && npm run build`
2. éªŒè¯æ²¡æœ‰ sourcemap æ–‡ä»¶ï¼š`ls dist/`
3. æ›´æ–°æ‚¨çš„ `package.json` å…ƒæ•°æ®

## ğŸ“š å­¦ä¹ èµ„æº

- **[n8n èŠ‚ç‚¹å¼€å‘](https://docs.n8n.io/integrations/creating-nodes/)** - å®˜æ–¹æ–‡æ¡£
- **[n8n å†…ç½®èŠ‚ç‚¹](https://github.com/n8n-io/n8n/tree/master/packages/nodes-base/nodes)** - æºä»£ç ç¤ºä¾‹
- **[npm ç¤¾åŒºèŠ‚ç‚¹](https://www.npmjs.com/search?q=keywords:n8n-community-node-package)** - æµè§ˆç¤¾åŒºåŒ…
- **[esbuild æ–‡æ¡£](https://esbuild.github.io/)** - äº†è§£æ‰“åŒ…å·¥å…·

## ğŸ¤ ä¸å®˜æ–¹ Starter çš„å¯¹æ¯”

| åŠŸèƒ½ | æ­¤ Starter (esbuild) | [å®˜æ–¹ Starter](https://github.com/n8n-io/n8n-nodes-starter) |
|------|---------------------|--------------------------------------------------------------|
| **æ„å»ºå·¥å…·** | esbuild | TypeScript ç¼–è¯‘å™¨ (tsc) |
| **æ„å»ºé€Ÿåº¦** | ~100ms | ~ç§’çº§ |
| **åŒ…å¤§å°** | é»˜è®¤å‹ç¼© | æœªæ‰“åŒ… |
| **ä¾èµ–** | æ‰“åŒ…åˆ°è¾“å‡ºä¸­ | åœ¨ node_modules ä¸­ |
| **n8n Cloud** | ä¸å…¼å®¹ï¼ˆå¦‚æœä½¿ç”¨ä¾èµ–ï¼‰ | å…¼å®¹ |
| **è‡ªæ‰˜ç®¡** | ä¼˜åŒ– | æ ‡å‡† |
| **CLI è„šæ‰‹æ¶** | æ‰‹åŠ¨ | äº¤äº’å¼ï¼ˆ`npm create @n8n/node`ï¼‰ |

## ğŸ“„ è®¸å¯è¯

MIT

---

**åŸºäº** [n8n-nodes-starter](https://github.com/n8n-io/n8n-nodes-starter) | **ä½¿ç”¨** [esbuild](https://esbuild.github.io/) **ä¼˜åŒ–**
